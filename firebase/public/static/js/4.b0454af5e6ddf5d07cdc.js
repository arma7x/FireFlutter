webpackJsonp([4],{413:function(e,t,s){var r=s(417)(s(436),s(473),null,null,null);e.exports=r.exports},417:function(e,t){e.exports=function(e,t,s,r,n){var u,o=e=e||{},i=typeof e.default;"object"!==i&&"function"!==i||(u=e,o=e.default);var a="function"==typeof o?o.options:o;t&&(a.render=t.render,a.staticRenderFns=t.staticRenderFns),r&&(a._scopeId=r);var c;if(n?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},a._ssrRegister=c):s&&(c=s),c){var l=a.functional,_=l?a.render:a.beforeCreate;l?a.render=function(e,t){return c.call(t),_(e,t)}:a.beforeCreate=_?[].concat(_,c):[c]}return{esModule:u,exports:o,options:a}}},436:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(58),n=(s.n(r),s(161)),u=s.n(n);t.default={data:function(){return{users:{},queues:null}},computed:{user:function(){return this.$store.getters.user},error:function(){return this.$store.getters.error}},mounted:function(){var e=this,t=r.database();t.ref("queues").orderByChild("timestamp").on("value",function(t){var s=[];for(var r in t.val()){var n=t.val()[r];n.key=r,s.push(n)}s.sort(function(e,t){return e.timestamp>t.timestamp?1:-1}),e.queues=s}),t.ref("users_public").on("value",function(t){e.users=t.val()})},methods:{joinChat:function(e){this.$router.push({path:"chat",query:{id:e}})},handleChat:function(e){var t=this;if(confirm("Are sure to put this queue under your supervision ?")){var s={assigned_user:this.user.uid,status:1};r.database().ref("queues/"+e).update(s).then(function(){return r.database().ref("chats/"+e).update(s)}).then(function(){r.auth().currentUser.getIdToken(!0).then(function(t){u.a.get("https://us-central1-"+r.apps[0].options.projectId+".cloudfunctions.net/adminNotifyClient",{params:{token:t,queue:e}})}),t.joinChat(e)}).catch(function(e){t.$store.commit("setError",e)})}}}}},473:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{staticClass:"no-center-vertical"},[s("v-layout",{attrs:{column:""}},[s("v-layout",{attrs:{row:""}},[s("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[null!=e.queues?s("v-list",{staticClass:"py-0",attrs:{subheader:""}},e._l(e.queues,function(t,r){return s("v-list-tile",{key:r,attrs:{avatar:""},on:{click:function(e){}}},[e.users[t.key]?s("v-list-tile-avatar",{attrs:{size:"40",color:"grey"}},[null!=e.users[t.key].photoUrl?s("img",{attrs:{src:e.users[t.key].photoUrl}}):e._e(),e._v(" "),null==e.users[t.key].photoUrl?s("v-icon",{attrs:{size:"50",color:"white"}},[e._v("account_circle")]):e._e()],1):e._e(),e._v(" "),e.users[t.key]?s("v-list-tile-content",[s("v-list-tile-title",[0!=t.status?s("v-icon",{attrs:{size:"16",color:"info"}},[e._v("lock")]):e._e(),e._v(" "),0==t.status?s("v-icon",{attrs:{size:"16",color:"warning"}},[e._v("lock_open")]):e._e(),e._v("\n                "+e._s(t.topic)+"\n              ")],1),e._v(" "),e.users[t.key]?s("v-list-tile-sub-title",[s("v-layout",{attrs:{row:""}},[e._v("\n                "+e._s(e.users[t.key].name)+"\n                "),s("v-spacer"),e._v("\n                "+e._s(new Date(t.timestamp).toLocaleString())+"\n                "),0!=t.assigned_user&&t.assigned_user!=e.user.uid?s("v-spacer"):e._e(),e._v(" "),0!=t.assigned_user&&t.assigned_user!=e.user.uid?s("span",[e._v(e._s(e.users[t.assigned_user].name))]):e._e()],1)],1):e._e()],1):e._e(),e._v(" "),t.assigned_user==e.user.uid||0==t.assigned_user?s("v-list-tile-action",[t.assigned_user==e.user.uid?s("v-btn",{attrs:{fab:"",small:"",color:"primary"},on:{click:function(s){return e.joinChat(t.key)}}},[s("v-icon",[e._v("chat")])],1):e._e(),e._v(" "),0==t.assigned_user?s("v-btn",{attrs:{fab:"",small:"",color:"warning"},on:{click:function(s){return e.handleChat(t.key)}}},[s("v-icon",[e._v("supervisor_account")])],1):e._e()],1):e._e(),e._v(" "),0!=t.assigned_user&&t.assigned_user!=e.user.uid&&null!==e.users[t.assigned_user]&&void 0!==e.users[t.assigned_user]?s("v-list-tile-avatar",{attrs:{size:"40",color:"grey"}},[null!=e.users[t.assigned_user].photoUrl?s("img",{attrs:{src:e.users[t.assigned_user].photoUrl}}):e._e(),e._v(" "),null==e.users[t.assigned_user].photoUrl?s("v-icon",{attrs:{size:"50",color:"white"}},[e._v("account_circle")]):e._e()],1):e._e()],1)}),1):e._e()],1)],1)],1)],1)},staticRenderFns:[]}}});