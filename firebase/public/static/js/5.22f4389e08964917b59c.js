webpackJsonp([5],{475:function(e,s,t){var r=t(479)(t(487),t(506),null,null,null);e.exports=r.exports},479:function(e,s){e.exports=function(e,s,t,r,a){var n,u=e=e||{},o=typeof e.default;"object"!==o&&"function"!==o||(n=e,u=e.default);var i="function"==typeof u?u.options:u;s&&(i.render=s.render,i.staticRenderFns=s.staticRenderFns),r&&(i._scopeId=r);var l;if(a?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},i._ssrRegister=l):t&&(l=t),l){var c=i.functional,_=c?i.render:i.beforeCreate;c?i.render=function(e,s){return l.call(s),_(e,s)}:i.beforeCreate=_?[].concat(_,l):[l]}return{esModule:n,exports:u,options:i}}},487:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=t(68),a=(t.n(r),t(190));s.default={data:function(){return{users:{},queues:null,ref_queues:null,ref_users_public:null}},computed:{user:function(){return this.$store.getters.user},error:function(){return this.$store.getters.error}},mounted:function(){var e=this,s=r.database();this.ref_queues=s.ref("queues"),this.ref_queues.orderByChild("timestamp").on("value",function(s){var t=[];for(var a in s.val()){var n=s.val()[a];n.key=a,t.push(n)}t.sort(function(e,s){return e.timestamp>s.timestamp?1:-1}),e.queues=t;var u=1;e.queues.forEach(function(e){if(!1===e.assigned_user){var s={queue_number:u};r.database().ref("chats/"+e.key).update(s),r.database().ref("queues/"+e.key).update(s),u++}})}),this.ref_users_public=s.ref("users_public"),this.ref_users_public.on("value",function(s){e.users=s.val()})},destroyed:function(){null!==this.ref_queues&&this.ref_queues.off("value"),null!==this.ref_users_public&&this.ref_users_public.off("value")},methods:{joinChat:function(e){this.$router.push({path:"chat",query:{id:e}})},handleChat:function(e){var s=this;if(confirm("Are sure to put this queue under your supervision ?")){this.$store.commit("setLoading",!0);var t=void 0;r.auth().currentUser.getIdToken(!0).then(function(s){return t=s,a.a.adminSuperviseQueue({token:s,queue:e})}).then(function(r){s.$store.commit("setLoading",!1),s.$store.commit("clearError"),a.a.adminNotifyClient({token:t,queue:e}),s.joinChat(e)}).catch(function(e){s.$store.commit("setLoading",!1),s.$store.commit("setError",e.response.data)})}}}}},506:function(e,s){e.exports={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("v-container",{staticClass:"no-center-vertical"},[t("v-layout",{attrs:{column:""}},[t("v-layout",{attrs:{row:""}},[t("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[null!=e.queues?t("div",{staticClass:"py-0"},e._l(e.queues,function(s,r){return t("v-card",{key:r,staticClass:"mb-2",attrs:{avatar:""}},[t("v-layout",{attrs:{column:""}},[t("v-card-text",[t("v-layout",{staticClass:"body-2",attrs:{"align-start":""}},[0!=s.status?t("v-icon",{staticClass:"mr-1 body-2",attrs:{color:"info"}},[e._v("lock")]):e._e(),e._v(" "),0==s.status?t("v-icon",{staticClass:"mr-1 body-2",attrs:{color:"warning"}},[e._v("lock_open")]):e._e(),e._v("\n                  "+e._s(s.topic)+"\n                ")],1),e._v(" "),t("v-layout",{staticClass:"mt-1",attrs:{row:""}},[e.users[s.key]?t("v-avatar",{attrs:{size:"40",color:"grey"}},[null!=e.users[s.key].photoUrl?t("img",{attrs:{src:e.users[s.key].photoUrl}}):e._e(),e._v(" "),null==e.users[s.key].photoUrl?t("v-icon",{attrs:{size:"50",color:"white"}},[e._v("account_circle")]):e._e()],1):e._e(),e._v(" "),t("v-layout",{staticClass:"px-2",attrs:{row:""}},[t("v-layout",[e.users[s.key]?t("v-layout",{attrs:{row:""}},[t("v-layout",{attrs:{column:""}},[t("span",{staticClass:"body-2"},[e._v("Client")]),e._v(" "),null!=e.users[s.key].name?t("span",{staticClass:"caption grey--text"},[e._v(e._s(e.users[s.key].name))]):e._e()])],1):e._e()],1),e._v(" "),0!=s.assigned_user&&s.assigned_user!=e.user.uid?t("v-spacer"):e._e(),e._v(" "),0!=s.assigned_user&&s.assigned_user!=e.user.uid?t("v-layout",[e.users[s.assigned_user]?t("v-layout",{attrs:{row:""}},[t("v-layout",{attrs:{column:"","align-end":""}},[t("span",{staticClass:"body-2"},[e._v("Supervisor")]),e._v(" "),null!=e.users[s.assigned_user].name?t("span",{staticClass:"caption grey--text"},[e._v(e._s(e.users[s.assigned_user].name))]):e._e()])],1):e._e()],1):e._e()],1),e._v(" "),s.assigned_user==e.user.uid||0==s.assigned_user?t("v-layout",{attrs:{"align-start":"","justify-end":""}},[s.assigned_user==e.user.uid?t("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{fab:"",small:"",color:"primary"},on:{click:function(t){return e.joinChat(s.key)}}},[t("v-icon",[e._v("chat")])],1):e._e(),e._v(" "),0==s.assigned_user?t("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{fab:"",small:"",color:"warning"},on:{click:function(t){return e.handleChat(s.key)}}},[t("v-icon",[e._v("supervisor_account")])],1):e._e()],1):e._e(),e._v(" "),0!=s.assigned_user&&s.assigned_user!=e.user.uid&&null!==e.users[s.assigned_user]&&void 0!==e.users[s.assigned_user]?t("v-avatar",{attrs:{size:"40",color:"grey"}},[null!=e.users[s.assigned_user].photoUrl?t("img",{attrs:{src:e.users[s.assigned_user].photoUrl}}):e._e(),e._v(" "),null==e.users[s.assigned_user].photoUrl?t("v-icon",{attrs:{size:"50",color:"white"}},[e._v("account_circle")]):e._e()],1):e._e()],1),e._v(" "),e.users[s.key]?t("v-layout",{staticStyle:{"line-height":"normal"},attrs:{"align-end":"","justify-end":"",column:""}},[t("v-layout",{staticClass:"mt-2 mx-1 caption",attrs:{"align-end":""}},[t("v-icon",{staticClass:"mr-1 caption",attrs:{color:"primary"}},[e._v("calendar_today")]),e._v("\n                    "+e._s(new Date(s.timestamp).toLocaleString())+"\n                  ")],1)],1):e._e()],1)],1)],1)}),1):e._e()])],1)],1)],1)},staticRenderFns:[]}}});