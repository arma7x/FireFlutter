webpackJsonp([5],{475:function(t,s,e){var r=e(479)(e(487),e(506),null,null,null);t.exports=r.exports},479:function(t,s){t.exports=function(t,s,e,r,a){var n,o=t=t||{},u=typeof t.default;"object"!==u&&"function"!==u||(n=t,o=t.default);var i="function"==typeof o?o.options:o;s&&(i.render=s.render,i.staticRenderFns=s.staticRenderFns),r&&(i._scopeId=r);var c;if(a?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},i._ssrRegister=c):e&&(c=e),c){var l=i.functional,v=l?i.render:i.beforeCreate;l?i.render=function(t,s){return c.call(s),v(t,s)}:i.beforeCreate=v?[].concat(v,c):[c]}return{esModule:n,exports:o,options:i}}},487:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=e(68),a=(e.n(r),e(190));s.default={data:function(){return{users:{},queues:null}},computed:{user:function(){return this.$store.getters.user},error:function(){return this.$store.getters.error}},mounted:function(){var t=this,s=r.database();s.ref("queues").orderByChild("timestamp").on("value",function(s){var e=[];for(var r in s.val()){var a=s.val()[r];a.key=r,e.push(a)}e.sort(function(t,s){return t.timestamp>s.timestamp?1:-1}),t.queues=e}),s.ref("users_public").on("value",function(s){t.users=s.val()})},methods:{joinChat:function(t){this.$router.push({path:"chat",query:{id:t}})},handleChat:function(t){var s=this;if(confirm("Are sure to put this queue under your supervision ?")){var e={assigned_user:this.user.uid,status:1};r.database().ref("queues/"+t).update(e).then(function(){return r.database().ref("chats/"+t).update(e)}).then(function(){r.auth().currentUser.getIdToken(!0).then(function(s){a.a.adminNotifyClient({token:s,queue:t})}),s.joinChat(t)}).catch(function(t){s.$store.commit("setError",t)})}}}}},506:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("v-container",{staticClass:"no-center-vertical"},[e("v-layout",{attrs:{column:""}},[e("v-layout",{attrs:{row:""}},[e("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[null!=t.queues?e("div",{staticClass:"py-0"},t._l(t.queues,function(s,r){return e("v-card",{key:r,staticClass:"mb-2",attrs:{avatar:""}},[e("v-layout",{attrs:{column:""}},[e("v-card-text",[e("v-layout",{staticClass:"body-2",attrs:{"align-start":""}},[0!=s.status?e("v-icon",{staticClass:"mr-1 body-2",attrs:{color:"info"}},[t._v("lock")]):t._e(),t._v(" "),0==s.status?e("v-icon",{staticClass:"mr-1 body-2",attrs:{color:"warning"}},[t._v("lock_open")]):t._e(),t._v("\n                  "+t._s(s.topic)+"\n                ")],1),t._v(" "),e("v-layout",{staticClass:"mt-1",attrs:{row:""}},[t.users[s.key]?e("v-avatar",{attrs:{size:"40",color:"grey"}},[null!=t.users[s.key].photoUrl?e("img",{attrs:{src:t.users[s.key].photoUrl}}):t._e(),t._v(" "),null==t.users[s.key].photoUrl?e("v-icon",{attrs:{size:"50",color:"white"}},[t._v("account_circle")]):t._e()],1):t._e(),t._v(" "),e("v-layout",{staticClass:"px-2",attrs:{row:""}},[e("v-layout",[e("v-layout",{attrs:{row:""}},[e("v-layout",{attrs:{column:""}},[e("span",{staticClass:"body-2"},[t._v("Client")]),t._v(" "),e("span",{staticClass:"caption grey--text"},[t._v(t._s(t.users[s.key].name))])])],1)],1),t._v(" "),0!=s.assigned_user&&s.assigned_user!=t.user.uid?e("v-spacer"):t._e(),t._v(" "),0!=s.assigned_user&&s.assigned_user!=t.user.uid?e("v-layout",[e("v-layout",{attrs:{row:""}},[e("v-layout",{attrs:{column:"","align-end":""}},[e("span",{staticClass:"body-2"},[t._v("Supervisor")]),t._v(" "),e("span",{staticClass:"caption grey--text"},[t._v(t._s(t.users[s.assigned_user].name))])])],1)],1):t._e()],1),t._v(" "),s.assigned_user==t.user.uid||0==s.assigned_user?e("v-layout",{attrs:{"align-start":"","justify-end":""}},[s.assigned_user==t.user.uid?e("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{fab:"",small:"",color:"primary"},on:{click:function(e){return t.joinChat(s.key)}}},[e("v-icon",[t._v("chat")])],1):t._e(),t._v(" "),0==s.assigned_user?e("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{fab:"",small:"",color:"warning"},on:{click:function(e){return t.handleChat(s.key)}}},[e("v-icon",[t._v("supervisor_account")])],1):t._e()],1):t._e(),t._v(" "),0!=s.assigned_user&&s.assigned_user!=t.user.uid&&null!==t.users[s.assigned_user]&&void 0!==t.users[s.assigned_user]?e("v-avatar",{attrs:{size:"40",color:"grey"}},[null!=t.users[s.assigned_user].photoUrl?e("img",{attrs:{src:t.users[s.assigned_user].photoUrl}}):t._e(),t._v(" "),null==t.users[s.assigned_user].photoUrl?e("v-icon",{attrs:{size:"50",color:"white"}},[t._v("account_circle")]):t._e()],1):t._e()],1),t._v(" "),t.users[s.key]?e("v-layout",{staticStyle:{"line-height":"normal"},attrs:{"align-end":"","justify-end":"",column:""}},[e("v-layout",{staticClass:"mt-2 mx-1 caption",attrs:{"align-end":""}},[e("v-icon",{staticClass:"mr-1 caption",attrs:{color:"primary"}},[t._v("calendar_today")]),t._v("\n                    "+t._s(new Date(s.timestamp).toLocaleString())+"\n                  ")],1)],1):t._e()],1)],1)],1)}),1):t._e()])],1)],1)],1)},staticRenderFns:[]}}});